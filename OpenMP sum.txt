Code :
#include <iostream>
#include <omp.h>
#include <iomanip>
#include <windows.h>

using namespace std;

int main() {
    int N, n;
    
    cout << "Distributed Array Sum Calculator\n" << endl;
    cout << "Enter N (elements): ";
    cin >> N;
    cout << "Enter n (processors): ";
    cin >> n;
    
    if(N <= 0 || n <= 0) {
        cout << "Error: Values must be positive!" << endl;
        system("pause");
        return 1;
    }
    
    n = (n > N) ? N : n;
    
    int* arr = new int[N];
    for(int i = 0; i < N; i++) arr[i] = i + 1;
    
    cout << "\nArray: [1, 2, ..., " << N << "]" << endl;
    cout << "Processors: " << n << " | Elements per processor: " << N/n << "\n" << endl;
    
    omp_set_num_threads(n);
    int total_sum = 0;
    int* proc_sums = new int[n]{0};
    
    #pragma omp parallel
    {
        int tid = omp_get_thread_num();
        int nt = omp_get_num_threads();
        int ept = N / nt;
        int start = tid * ept;
        int end = (tid == nt - 1) ? N : start + ept;
        
        int partial = 0;
        for(int i = start; i < end; i++) partial += arr[i];
        
        proc_sums[tid] = partial;
        
        #pragma omp critical
        {
            cout << "Processor " << tid << " [" << start << "-" << end-1 << "]: Sum = " << partial << endl;
        }
        
        #pragma omp atomic
        total_sum += partial;
    }
    
    cout << "\n--- Final Results ---" << endl;
    for(int i = 0; i < n; i++) cout << "P" << i << ": " << proc_sums[i] << endl;
    
    int expected = (N * (N + 1)) / 2;
    cout << "\nTotal: " << total_sum << " | Expected: " << expected;
    cout << (total_sum == expected ? " ✓" : " ✗") << endl;
    
    delete[] arr;
    delete[] proc_sums;
    system("pause");
    return 0;
}

